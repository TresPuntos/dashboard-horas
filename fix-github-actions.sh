#!/bin/bash

echo "ğŸ”§ SOLUCIÃ“N PARA ERROR DE GITHUB ACTIONS"
echo "========================================"
echo ""

echo "âŒ PROBLEMA IDENTIFICADO:"
echo "â€¢ GitHub Actions no puede conectarse al servidor"
echo "â€¢ Faltan los secrets de configuraciÃ³n"
echo "â€¢ Error de timeout en la conexiÃ³n"
echo ""

echo "ğŸ¯ SOLUCIÃ“N 1: CONFIGURAR SECRETS"
echo "================================="
echo ""
echo "1. Ve a: https://github.com/TresPuntos/dashboard-horas/settings/secrets/actions"
echo "2. Haz click en 'New repository secret'"
echo "3. AÃ±ade estos secrets:"
echo ""
echo "   ğŸ”‘ SERVER_HOST = trespuntoscomunicacion.es"
echo "   ğŸ”‘ SERVER_USER = cursor"
echo "   ğŸ”‘ SERVER_PASSWORD = 5#!OWwzue465&OO(N5"
echo "   ğŸ”‘ SERVER_PORT = 22"
echo ""

echo "ğŸ¯ SOLUCIÃ“N 2: DEPLOYMENT MANUAL"
echo "================================"
echo ""
echo "Si GitHub Actions sigue fallando, podemos hacer deployment manual:"
echo ""
echo "1. Ejecuta: npm run build"
echo "2. Ejecuta: tar -czf dashboard-deploy.tar.gz -C build ."
echo "3. Sube manualmente el archivo al servidor"
echo ""

echo "ğŸ¯ SOLUCIÃ“N 3: VERIFICAR CONECTIVIDAD"
echo "====================================="
echo ""
echo "El servidor puede tener problemas de firewall o configuraciÃ³n."
echo "Verifica con tu proveedor de hosting que:"
echo "â€¢ El puerto 22 estÃ© abierto"
echo "â€¢ Las conexiones SSH estÃ©n permitidas"
echo "â€¢ No haya restricciones de IP"
echo ""

echo "ğŸ“‹ ESTADO ACTUAL:"
echo "================="
echo "âœ… Push a GitHub: Funcionando"
echo "âœ… IntegraciÃ³n Toggl: Completa"
echo "âœ… Build: Generado correctamente"
echo "âŒ Deployment automÃ¡tico: Fallando por conectividad"
echo ""

echo "ğŸ¯ RECOMENDACIÃ“N:"
echo "================="
echo "1. Configura los secrets primero"
echo "2. Si sigue fallando, haremos deployment manual"
echo "3. El dashboard ya estÃ¡ funcionando, solo falta el deployment automÃ¡tico"
echo ""

echo "âœ… Script completado"
